"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cjson=void 0;const fs_1=require("fs"),path_1=require("path");class Json{path;route;data;constructor(t,s){if(this.path=(0,path_1.resolve)(t),this.route=s?s.split("/"):[],!(0,fs_1.existsSync)(this.path))throw new Error(`Not found "${this.path}" json file`);var e=JSON.parse((0,fs_1.readFileSync)(this.path,"utf-8"));for(const s of this.route)e=e[s];this.data=e,this.save=this.save.bind(this),this.update=this.update.bind(this)}update(t){var t=t instanceof Function?t(this.data):t,s=this.data;if(this.route.length){for(const e of this.route.slice(0,this.route.length-1))s=s[e];s[this.route[this.route.length-1]]=t}else this.data=t;return this}save(t){(0,fs_1.writeFileSync)(this.path,t?JSON.stringify(this.data):JSON.stringify(this.data,null,4))}}function json(t,s){return new Json(t,s)}function cjson(t,s){return(0,fs_1.writeFileSync)((0,path_1.resolve)(t),"{}"),new Json(t,s)}exports.default=json,exports.cjson=cjson;